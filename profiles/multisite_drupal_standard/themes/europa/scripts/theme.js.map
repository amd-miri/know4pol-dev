{"version":3,"sources":["theme.js"],"names":["file","_this","this","$button","jQuery","$translations","click","self","collapse","toggleClass","showText","hideText","each","dependentId","attr","toggler","hasClass","arrow","fillMe","text","up","down","add","rem","addClass","removeClass","timeline","showTimelineText","$timelineSelector","once","timelineItemSelector","timelineItemsCount","length","timeLineButton","append","index","element","event","preventDefault","target","hide","scrollspy","tab","$this","enquire","register","setup","siblings","children","match","unmatch","fixBlockHeights","$block","$wrapper","$blocks","selector","$firstColumn","$lastColumn","find","item","eq","$row","push","i","max","matchHeight","equalHeight","breakpoints","_this2","$equalHeightBlock","small","Drupal","europa","medium","behaviors","dt_file","attach","t","europa_tabs","equal_blocks","collapsing","arguments","undefined","europa_collapse","trackElements","window","PiwikDTT","sendTrack","triggerValue","action","category","value","data","innerElements","inArray","_paq"],"mappings":"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","file":"theme.js","sourcesContent":["(function () {\n  'use strict';\n\n  /**\n   * File component related behaviors.\n   */\n\n  function file() {\n    var _this = this;\n\n    var $button = jQuery('.file__translations-control');\n    var $translations = jQuery('.file__translations-list');\n\n    $button.click(function () {\n      var self = _this;\n      $translations.collapse('toggle');\n      jQuery(self).toggleClass('is-collapsed');\n    });\n  }\n\n  function collapse(showText, hideText) {\n    var _this = this;\n\n    jQuery('button[data-toggle=collapse]').each(function () {\n      var dependentId = jQuery(_this).attr('data-target');\n      var toggler = jQuery(dependentId).hasClass('in') ? hideText : showText;\n      var arrow = jQuery('.icon', jQuery(_this));\n      var fillMe = jQuery('.toggling-text', jQuery(_this));\n      fillMe.text(toggler);\n\n      jQuery(_this).click(function () {\n        var up = 'icon--up';\n        var down = 'icon--down';\n        var add = arrow.hasClass(down) ? up : down;\n        var rem = arrow.hasClass(down) ? down : up;\n        toggler = fillMe.text() === hideText ? showText : hideText;\n        fillMe.text(toggler);\n        arrow.addClass(add).removeClass(rem);\n      });\n    });\n  }\n\n  function timeline(showTimelineText) {\n    var $timelineSelector = jQuery('.timeline');\n\n    jQuery($timelineSelector).once('timeline', function () {\n      var timelineItemSelector = '.timeline__item';\n      var timelineItemsCount = jQuery(timelineItemSelector).length;\n      var timeLineButton = '\\n      <div class=\"timeline__footer\">\\n        <button class=\"btn btn-time-line\">' + showTimelineText + '</button>\\n      </div>';\n\n      if (timelineItemsCount > 4) {\n        $timelineSelector.append(timeLineButton);\n        jQuery(timelineItemSelector).each(function (index, element) {\n          if (index >= 4) {\n            jQuery(element).addClass('hidden');\n          }\n        });\n\n        jQuery('.btn-time-line').click(function (event) {\n          event.preventDefault();\n          jQuery(event.target).hide();\n          jQuery(timelineItemSelector).removeClass('hidden');\n          // Refreshing scrollspy to recalculate the offset.\n          jQuery('body').scrollspy('refresh');\n        });\n      }\n    });\n  }\n\n  function tab() {\n    var _this = this;\n\n    jQuery('.nav-tabs--with-content').once('nav-tabs', function () {\n      var $this = jQuery(_this);\n      if (typeof enquire !== 'undefined') {\n        // Runs on device width change.\n        enquire.register('screen and (max-width: 479px)', {\n          // Setup.\n          setup: function setup() {\n            $this.siblings('.tab-content').children().addClass('tab-pane');\n          },\n          // Mobile.\n          match: function match() {\n            $this.siblings('.tab-content').children().removeClass('tab-pane');\n          },\n          // Desktop.\n          unmatch: function unmatch() {\n            $this.siblings('.tab-content').children().addClass('tab-pane');\n          }\n        });\n      }\n    });\n  }\n\n  function fixBlockHeights($block) {\n    var _this = this;\n\n    $block.each(function () {\n      var $wrapper = jQuery(_this);\n      var $blocks = [];\n\n      // Columns and rows.\n      if ($wrapper.hasClass('listing__wrapper--two-columns') || $wrapper.hasClass('listing__wrapper--row-two')) {\n        (function () {\n          var selector = '.listing__item-link > :first-child';\n          // Two column listing blocks.\n          var $firstColumn = void 0;\n          var $lastColumn = void 0;\n\n          if ($wrapper.hasClass('listing__wrapper--two-columns')) {\n            $firstColumn = $wrapper.find('.listing:first-child .listing__item');\n            $lastColumn = $wrapper.find('.listing:last-child .listing__item');\n          } else if ($wrapper.hasClass('listing__wrapper--row-two')) {\n            // Row with two items.\n            $firstColumn = $wrapper.find('.listing .listing__item:nth-child(odd)');\n            $lastColumn = $wrapper.find('.listing .listing__item:nth-child(even)');\n          }\n\n          // First column always contains more items if not equal.\n          $firstColumn.each(function (index, item) {\n            // Only applicable if there's an item in the other column at index.\n            if (!$lastColumn.eq(index)) {\n              return;\n            }\n            var $row = jQuery(item).find(selector).add($lastColumn.eq(index).find(selector));\n            $blocks.push($row);\n          });\n        })();\n      } else {\n        // Simple listing blocks.\n        $blocks.push($wrapper.find('.listing__item-link > :first-child'));\n      }\n\n      for (var i = 0, max = $blocks.length; i < max; i++) {\n        $blocks[i].matchHeight();\n      }\n    });\n  }\n\n  function equalHeight(breakpoints) {\n    var _this2 = this;\n\n    jQuery('.equal-height').once('equal-height-blocks', function () {\n      var $equalHeightBlock = jQuery(_this2);\n      if (typeof enquire !== 'undefined') {\n        // Runs on device width change.\n        enquire.register(breakpoints.small, {\n          // Desktop.\n          match: function match() {\n            return fixBlockHeights($equalHeightBlock, false);\n          },\n          // Mobile.\n          unmatch: function unmatch() {\n            return fixBlockHeights($equalHeightBlock, true);\n          }\n        });\n      }\n    });\n  }\n\n  Drupal.europa = Drupal.europa || {};\n  Drupal.europa.breakpoints = Drupal.europa.breakpoints || {};\n\n  // TODO:\n  // Populate the breakpoints with those comming from Breakpoints module.\n  // @see breakpoints js module for potential solution.\n  Drupal.europa.breakpoints.medium = 'screen and (min-width: 480px)';\n  Drupal.europa.breakpoints.small = 'screen and (min-width: 768px)';\n\n  // File\n  Drupal.behaviors.dt_file = { attach: file };\n\n  // Timeline\n  Drupal.behaviors.timeline = { attach: function attach() {\n      return timeline(Drupal.t('Show all timeline'));\n    } };\n\n  // Tabs\n  Drupal.behaviors.europa_tabs = { attach: tab };\n\n  // Equal height blocks\n  Drupal.behaviors.equal_blocks = { attach: function attach() {\n      return equalHeight(Drupal.europa.breakpoints);\n    } };\n\n  // Collapse\n  Drupal.europa.collapsing = function () {\n    var showText = arguments.length <= 0 || arguments[0] === undefined ? Drupal.t('Show') : arguments[0];\n    var hideText = arguments.length <= 1 || arguments[1] === undefined ? Drupal.t('Hide') : arguments[1];\n    return collapse(showText, hideText);\n  };\n\n  Drupal.behaviors.europa_collapse = {\n    attach: function attach() {\n      return Drupal.europa.collapsing();\n    }\n  };\n\n  // Piwik\n  var trackElements = [];\n  window.PiwikDTT = {\n    /**\n     * Acts like a wrapper for Piwik push method.\n     *\n     * For Piwik parameters refer to {@see https://developer.piwik.org/guides/tracking-javascript-guide}\n     *\n     * @param int {triggerValue}\n     *   How many times should the call be triggered by page load\n     *   Accepts 0,1 (0 for always and 1 just for one time).\n     * @param str {action}\n     *   Defines Action in piwik.\n     * @param str {category}\n     *   Defines category in piwik.\n     * @param {value}\n     *  Defines category in piwik.\n     * @param {data}\n     *  Defines category in piwik.\n     */\n    sendTrack: function sendTrack(triggerValue) {\n      var action = arguments.length <= 1 || arguments[1] === undefined ? 'trackEvent' : arguments[1];\n      var category = arguments[2];\n      var value = arguments[3];\n      var data = arguments[4];\n\n      // Trigger only once.\n      if (triggerValue === 1) {\n        var innerElements = triggerValue + action + category + value + data;\n        if (jQuery.inArray(innerElements, trackElements) === -1) {\n          trackElements.push(innerElements);\n          if (typeof _paq !== 'undefined') {\n            _paq.push([action, category, value, data]);\n          }\n        }\n      }\n\n      // Always trigger.\n      if (triggerValue === 0) {\n        if (typeof _paq !== 'undefined') {\n          _paq.push([action, category, value, data]);\n        }\n      }\n    }\n  };\n\n}());\n//# sourceMappingURL=theme.js.map"],"sourceRoot":"../src/"}